<DashboardScreen>:
    name: "dashboard"

    canvas.before:
        Color:
            rgba: 243/255, 233/255, 226/255, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        # Top bar outside the scrollable area
        MDTopAppBar:
            title: "P e t W a t c h"
            font_name: "BPoppins"
            pos_hint: {"top": 1}
            elevation: 0
            md_bg_color: 235/255, 143/255, 52/255, 1
            size_hint_y: None
            height: dp(45)

        # Scrollable content area
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                orientation: 'vertical'
                spacing: 0
                size_hint_y: None
                height: self.minimum_height

                MDCard:
                    size_hint: None, None
                    size: root.width - dp(20), dp(150)
                    md_bg_color: 1, 1, 1, 0
                    radius: [15]
                    elevation: 0
                    padding: [0, 0, 0, 0]

                    Image:
                        source: 'assets/dashboard.png'
                        size_hint_y: None
                        height: dp(140)
                        allow_stretch: True
                        keep_ratio: False
                        pos_hint: {"top": 1}

                MDLabel:
                    id: user_label
                    text: "Hello, [b]Name[/b]"
                    halign: "center"
                    markup: True
                    font_name: "MPoppins"
                    font_size: "18sp"
                    size_hint_y: None
                    height: dp(40)
                    theme_text_color: "Custom"
                    text_color: 79/255, 54/255, 48/255, 1

                MDGridLayout:
                    cols: 1
                    spacing: dp(10)
                    padding: dp(10)
                    adaptive_height: True
                    size_hint_x: None
                    width: self.parent.width  # Ensure the grid takes full width

                    MDCard:
                        size_hint: None, None
                        size: self.parent.width - dp(20), dp(180)  # Adjust size based on screen width
                        md_bg_color: 1, 1, 1, 1
                        radius: [15]
                        elevation: 1
                        padding: dp(10)

                        MDBoxLayout:
                            orientation: 'horizontal'
                            spacing: dp(10)
                            size_hint_y: None
                            height: dp(70)  # Adjust height to fit content

                            # Image Plus Icon
                            MDCard:
                                size_hint: None, None
                                size: dp(70), dp(70)  # Set a fixed size for the image icon
                                radius: [10]
                                md_bg_color: 0.9, 0.9, 0.9, 1

                                MDIconButton:
                                    icon: "image-plus"
                                    pos_hint: {"center_x": 0.5, "center_y": 0.3}
                                    theme_icon_color: "Custom"
                                    icon_color: 79/255, 54/255, 48/255, 1

                            # Pet Info (Name, Breed, Age, Gender)
                            MDBoxLayout:
                                orientation: 'vertical'
                                spacing: dp(5)
                                padding: [0, 5, 0, 0]
                                size_hint_x: 1  # Allow this box layout to take full width

                                MDLabel:
                                    id: pet_name_label
                                    text: "Pet Name"
                                    font_name: "BPoppins"
                                    font_size: "17sp"
                                    theme_text_color: "Custom"
                                    text_color: 79/255, 54/255, 48/255, 1

                                MDGridLayout:
                                    cols: 1
                                    spacing: dp(8)
                                    size_hint_y: None
                                    height: dp(120)
                                    padding: [dp(10), 0, dp(10), 0]

                                    MDLabel:
                                        text: "Breed"
                                        id: pet_breed_label
                                        font_name: "MPoppins"
                                        theme_text_color: "Custom"
                                        text_color: 79/255, 54/255, 48/255, 0.8

                                    MDLabel:
                                        text: "Age"
                                        id: pet_age_label
                                        font_name: "MPoppins"
                                        theme_text_color: "Custom"
                                        text_color: 79/255, 54/255, 48/255, 0.8

                                    MDLabel:
                                        text: "Gender"
                                        id: pet_gender_label
                                        font_name: "MPoppins"
                                        theme_text_color: "Custom"
                                        text_color: 79/255, 54/255, 48/255, 0.8


                # Temperature widgets layout
                MDGridLayout:
                    cols: 2
                    spacing: dp(10)
                    padding: dp(10)
                    adaptive_height: True
                    size_hint_x: None  # Allow widgets to adjust dynamically within screen width
                    width: self.parent.width  # Make sure the grid layout takes full width

                    # First widget for temperature "38°C"
                    MDCard:
                        size_hint: None, None
                        size: self.parent.width / 2 - dp(20), dp(130)  # Equal width for both cards
                        md_bg_color: 1, 1, 1, 1
                        radius: [15]
                        elevation: 1
                        padding: dp(10)

                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: dp(10)
                            padding: dp(10)

                            MDIconButton:
                                icon: "thermometer"
                                theme_icon_color: "Custom"
                                icon_color: 235/255, 143/255, 52/255, 1
                                pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            MDLabel:
                                text: "38°C"
                                font_name: "MPoppins"
                                font_size: "20sp"
                                halign: "center"
                                theme_text_color: "Custom"
                                text_color: 79/255, 54/255, 48/255, 1

                    # Second widget for status "Normal"
                    MDCard:
                        size_hint: None, None
                        size: self.parent.width / 2 - dp(20), dp(130)  # Equal width for both cards
                        md_bg_color: 1, 1, 1, 1
                        radius: [15]
                        elevation: 1
                        padding: dp(10)

                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: dp(10)
                            padding: dp(10)

                            MDIconButton:
                                icon: "check-circle"
                                theme_icon_color: "Custom"
                                icon_color: 34/255, 139/255, 34/255, 1  # Green
                                pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            MDLabel:
                                text: "Normal"
                                font_name: "MPoppins"
                                font_size: "20sp"
                                halign: "center"
                                theme_text_color: "Custom"
                                text_color: 34/255, 139/255, 34/255, 1  # Green


        # Bottom navigation stays outside of the scrollable area
        MDBottomNavigation:
            panel_color: 250/255, 177/255, 47/255, 1
            md_bg_color: 250/255, 177/255, 47/255, 1
            size_hint_y: 0.2

            MDBottomNavigationItem:
                name: "home"
                text: "Home"
                icon: "home"
                on_tab_press: root.home()
                text_color_active: 235/255, 143/255, 52/255, 1
                md_bg_color: 243/255, 233/255, 226/255, 1

            MDBottomNavigationItem:
                name: "activitylogs"
                text: "Activity Logs"
                icon: "file-document"
                on_tab_press: root.activity_logs()
                text_color_active: 235/255, 143/255, 52/255, 1
                md_bg_color: 243/255, 233/255, 226/255, 1

            MDBottomNavigationItem:
                name: "camera"
                text: "Camera"
                icon: "camera"
                on_tab_press: root.go_to_live_feed()
                text_color_active: 235/255, 143/255, 52/255, 1
                md_bg_color: 243/255, 233/255, 226/255, 1

            MDBottomNavigationItem:
                name: "pet"
                text: "Pet"
                icon: "dog"
                on_tab_press: root.pet_tab()
                text_color_active: 235/255, 143/255, 52/255, 1
                md_bg_color: 243/255, 233/255, 226/255, 1

            MDBottomNavigationItem:
                name: "profile"
                text: "Profile"
                icon: "account"
                on_tab_press: root.profile_tab()
                text_color_active: 235/255, 143/255, 52/255, 1
                md_bg_color: 243/255, 233/255, 226/255, 1
